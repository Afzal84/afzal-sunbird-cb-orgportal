<div class="flex flex-4 flex-column" *ngIf="batchData">
  <mat-card class="flex-custom batch-detailspage">
    <ws-widget-breadcrumbs-org [widgetData]="breadcrumbs" *ngIf="breadcrumbs"></ws-widget-breadcrumbs-org>
    <div class="flex-4 mobile-margin mat-h2 margin-top-m">
      {{batchData.name}}
    </div>
    <mat-card-content>
      <ng-container>
        <div class="margin-bottom-xl margin-top-l grey-box paddig-m ws-mat-accent-border">
          <p class="font-bold">Batch details</p>
          <ul class="margin-top-m margin-bottom-m batch-data" *ngIf="batchData">
            <li><mat-icon>tag</mat-icon> {{batchData.batchId}}</li>
            <li><mat-icon>event</mat-icon> {{batchData.startDate | date: 'mediumDate'}} - {{batchData.endDate | date:
              'mediumDate'}}</li>
            <li><mat-icon>event</mat-icon> {{batchData.enrollmentEndDate | date: 'mediumDate'}}</li>
            <li><mat-icon>people</mat-icon> {{approvedUsers.length}} Learners</li>
          </ul>
        </div>
      </ng-container>

      <ng-container>
        <div class="flex flex-1 flex-column margin-fix">
          <div class="flex flex-1 filter max-height-60">
            <a class="filter-option cursor-pointer" [ngClass]="{'ws-mat-accent-border-active font-bold' : currentFilter === 'pending',
                                                'ws-mat-accent-border font-medium':currentFilter !== 'pending'}"
              mat-button (click)="filter('pending')" role="button">New requests
              <!-- <span *ngIf="newUsers" class="ws-mat-black60-text">({{newUsers.length}})</span> -->
            </a>
            <a class="filter-option cursor-pointer"
              [ngClass]="{'ws-mat-accent-border-active font-bold' : currentFilter === 'approved',
                                                              'ws-mat-accent-border font-medium':currentFilter !== 'approved'}" mat-button
              (click)="filter('approved')" role="button">Learners
              <!-- <span *ngIf="approvedUsers" class="ws-mat-black60-text">({{approvedUsers.length}})</span> -->
            </a>
            <a class="filter-option cursor-pointer"
              [ngClass]="{'ws-mat-accent-border-active font-bold' : currentFilter === 'rejected',
                                                                        'ws-mat-accent-border font-medium':currentFilter !== 'rejected'}" mat-button
              (click)="filter('rejected')" role="button">Rejected requests
              <!-- <span *ngIf="rejectedUsers" class="ws-mat-black60-text">({{rejectedUsers.length}})</span> -->
            </a>
          </div>
        </div>
        <ng-container *ngIf="currentFilter === 'pending'">
          <div class="b-c box" *ngIf="newUsers && newUsers.length > 0">
            <div *ngFor="let user of newUsers">
              <ws-app-users-card [user]="user" [actions]="true" [programData]="linkData"
                (userClick)="onSubmit($event)"></ws-app-users-card>
            </div>
          </div>
          <div class="b-c box" *ngIf="newUsers && newUsers.length == 0">
            <p class="padding-m">No new requests yet</p>
          </div>
        </ng-container>
        <ng-container *ngIf="currentFilter === 'approved'">
          <div class="b-c box" *ngIf="approvedUsers && approvedUsers.length > 0">
            <div *ngFor="let user of approvedUsers">
              <ws-app-users-card [user]="user" [actions]="false" [programData]="linkData"></ws-app-users-card>
            </div>
          </div>
          <div class="b-c box" *ngIf="approvedUsers && approvedUsers.length == 0">
            <p class="padding-m">No learners yet</p>
          </div>
        </ng-container>
        <ng-container *ngIf="currentFilter === 'rejected'">
          <div class="b-c box" *ngIf="rejectedUsers && rejectedUsers.length > 0">
            <div *ngFor="let user of rejectedUsers">
              <ws-app-users-card [user]="user" [actions]="false" [programData]="linkData"></ws-app-users-card>
            </div>
          </div>
          <div class="b-c box" *ngIf="rejectedUsers && rejectedUsers.length == 0">
            <p class="padding-m">No rejected requests yet</p>
          </div>
        </ng-container>
      </ng-container>
    </mat-card-content>
  </mat-card>
</div>